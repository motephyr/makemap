L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,options:{closeButton:!0,position:"left",autoPan:!0},initialize:function(t,i){L.setOptions(this,i);var n=this._contentContainer=L.DomUtil.get(t);n.parentNode.removeChild(n);var o="leaflet-",e=this._container=L.DomUtil.create("div",o+"sidebar "+this.options.position);if(L.DomUtil.addClass(n,o+"control"),e.appendChild(n),this.options.closeButton){var s=this._closeButton=L.DomUtil.create("a","close",e);s.innerHTML="&times;"}},addTo:function(t){var i=this._container,n=this._contentContainer;if(this.options.closeButton){var o=this._closeButton;L.DomEvent.on(o,"click",this.hide,this)}L.DomEvent.on(i,"transitionend",this._handleTransitionEvent,this).on(i,"webkitTransitionEnd",this._handleTransitionEvent,this);var e=t._controlContainer;e.insertBefore(i,e.firstChild),this._map=t;var s=L.DomEvent.stopPropagation;return L.DomEvent.on(n,"click",s).on(n,"mousedown",s).on(n,"touchstart",s).on(n,"dblclick",s).on(n,"mousewheel",s).on(n,"MozMousePixelScroll",s),this},removeFrom:function(t){this.hide();var i=this._contentContainer,n=t._controlContainer;n.removeChild(this._container),this._map=null;var o=L.DomEvent.stopPropagation;if(L.DomEvent.off(i,"click",o).off(i,"mousedown",o).off(i,"touchstart",o).off(i,"dblclick",o).off(i,"mousewheel",o).off(i,"MozMousePixelScroll",o),L.DomEvent.off(container,"transitionend",this._handleTransitionEvent,this).off(container,"webkitTransitionEnd",this._handleTransitionEvent,this),this._closeButton&&this._close){var e=this._closeButton;L.DomEvent.off(e,"click",this.hide,this)}return this},isVisible:function(){return L.DomUtil.hasClass(this._container,"visible")},show:function(){this.isVisible()||(L.DomUtil.addClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([-this.getOffset()/2,0],{duration:.5}),this.fire("show"))},hide:function(t){this.isVisible()&&(L.DomUtil.removeClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([this.getOffset()/2,0],{duration:.5}),this.fire("hide")),t&&L.DomEvent.stopPropagation(t)},toggle:function(){this.isVisible()?this.hide():this.show()},getContainer:function(){return this._contentContainer},getCloseButton:function(){return this._closeButton},setContent:function(t){return this.getContainer().innerHTML=t,this},getOffset:function(){return"right"===this.options.position?-this._container.offsetWidth:this._container.offsetWidth},_handleTransitionEvent:function(t){("left"==t.propertyName||"right"==t.propertyName)&&this.fire(this.isVisible()?"shown":"hidden")}}),L.control.sidebar=function(t,i){return new L.Control.Sidebar(t,i)};